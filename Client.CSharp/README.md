# PotatoVN.Client - the C# library for the PotatoVN.Server

PotatoVN 同步服务器
最新更新：galgame新增playcount字段

This C# SDK is automatically generated by the [OpenAPI Generator](https://openapi-generator.tech) project:

- API version: v1.4
- SDK version: 1.0.0
- Generator version: 7.13.0
- Build package: org.openapitools.codegen.languages.CSharpClientCodegen

<a id="frameworks-supported"></a>
## Frameworks supported

<a id="dependencies"></a>
## Dependencies

- [Json.NET](https://www.nuget.org/packages/Newtonsoft.Json/) - 13.0.2 or later
- [JsonSubTypes](https://www.nuget.org/packages/JsonSubTypes/) - 1.8.0 or later
- [System.ComponentModel.Annotations](https://www.nuget.org/packages/System.ComponentModel.Annotations) - 5.0.0 or later

The DLLs included in the package may not be the latest version. We recommend using [NuGet](https://docs.nuget.org/consume/installing-nuget) to obtain the latest version of the packages:
```
Install-Package Newtonsoft.Json
Install-Package JsonSubTypes
Install-Package System.ComponentModel.Annotations
```
<a id="installation"></a>
## Installation
Run the following command to generate the DLL
- [Mac/Linux] `/bin/sh build.sh`
- [Windows] `build.bat`

Then include the DLL (under the `bin` folder) in the C# project, and use the namespaces:
```csharp
using PotatoVN.Client.Api;
using PotatoVN.Client.Client;
using PotatoVN.Client.Model;
```
<a id="packaging"></a>
## Packaging

A `.nuspec` is included with the project. You can follow the Nuget quickstart to [create](https://docs.microsoft.com/en-us/nuget/quickstart/create-and-publish-a-package#create-the-package) and [publish](https://docs.microsoft.com/en-us/nuget/quickstart/create-and-publish-a-package#publish-the-package) packages.

This `.nuspec` uses placeholders from the `.csproj`, so build the `.csproj` directly:

```
nuget pack -Build -OutputDirectory out PotatoVN.Client.csproj
```

Then, publish to a [local feed](https://docs.microsoft.com/en-us/nuget/hosting-packages/local-feeds) or [other host](https://docs.microsoft.com/en-us/nuget/hosting-packages/overview) and consume the new package via Nuget as usual.

<a id="usage"></a>
## Usage

To use the API client with a HTTP proxy, setup a `System.Net.WebProxy`
```csharp
Configuration c = new Configuration();
System.Net.WebProxy webProxy = new System.Net.WebProxy("http://myProxyUrl:80/");
webProxy.Credentials = System.Net.CredentialCache.DefaultCredentials;
c.Proxy = webProxy;
```

### Connections
Each ApiClass (properly the ApiClient inside it) will create an instance of HttpClient. It will use that for the entire lifecycle and dispose it when called the Dispose method.

To better manager the connections it's a common practice to reuse the HttpClient and HttpClientHandler (see [here](https://docs.microsoft.com/en-us/dotnet/architecture/microservices/implement-resilient-applications/use-httpclientfactory-to-implement-resilient-http-requests#issues-with-the-original-httpclient-class-available-in-net) for details). To use your own HttpClient instance just pass it to the ApiClass constructor.

```csharp
HttpClientHandler yourHandler = new HttpClientHandler();
HttpClient yourHttpClient = new HttpClient(yourHandler);
var api = new YourApiClass(yourHttpClient, yourHandler);
```

If you want to use an HttpClient and don't have access to the handler, for example in a DI context in Asp.net Core when using IHttpClientFactory.

```csharp
HttpClient yourHttpClient = new HttpClient();
var api = new YourApiClass(yourHttpClient);
```
You'll loose some configuration settings, the features affected are: Setting and Retrieving Cookies, Client Certificates, Proxy settings. You need to either manually handle those in your setup of the HttpClient or they won't be available.

Here an example of DI setup in a sample web project:

```csharp
services.AddHttpClient<YourApiClass>(httpClient =>
   new PetApi(httpClient));
```


<a id="getting-started"></a>
## Getting Started

```csharp
using System.Collections.Generic;
using System.Diagnostics;
using System.Net.Http;
using PotatoVN.Client.Api;
using PotatoVN.Client.Client;
using PotatoVN.Client.Model;

namespace Example
{
    public class Example
    {
        public static void Main()
        {

            Configuration config = new Configuration();
            config.BasePath = "http://localhost";
            // create instances of HttpClient, HttpClientHandler to be reused later with different Api classes
            HttpClient httpClient = new HttpClient();
            HttpClientHandler httpClientHandler = new HttpClientHandler();
            var apiInstance = new BangumiApi(httpClient, config, httpClientHandler);
            var code = "code_example";  // string | 

            try
            {
                // 使用code换取bgm token
                BangumiToken result = apiInstance.BangumiOauthGet(code);
                Debug.WriteLine(result);
            }
            catch (ApiException e)
            {
                Debug.Print("Exception when calling BangumiApi.BangumiOauthGet: " + e.Message );
                Debug.Print("Status Code: "+ e.ErrorCode);
                Debug.Print(e.StackTrace);
            }

        }
    }
}
```

<a id="documentation-for-api-endpoints"></a>
## Documentation for API Endpoints

All URIs are relative to *http://localhost*

Class | Method | HTTP request | Description
------------ | ------------- | ------------- | -------------
*BangumiApi* | [**BangumiOauthGet**](docs/BangumiApi.md#bangumioauthget) | **GET** /bangumi/oauth | 使用code换取bgm token
*BangumiApi* | [**BangumiRefreshGet**](docs/BangumiApi.md#bangumirefreshget) | **GET** /bangumi/refresh | 使用refresh token换取bgm token
*GalgameApi* | [**GalgameDelete**](docs/GalgameApi.md#galgamedelete) | **DELETE** /galgame | 删除用户的所有游戏
*GalgameApi* | [**GalgameDeletedGet**](docs/GalgameApi.md#galgamedeletedget) | **GET** /galgame/deleted | 获取已删除的galgame列表
*GalgameApi* | [**GalgameGalgameIdDelete**](docs/GalgameApi.md#galgamegalgameiddelete) | **DELETE** /galgame/{galgameId} | 删除游戏
*GalgameApi* | [**GalgameGalgameIdPlaylogPatch**](docs/GalgameApi.md#galgamegalgameidplaylogpatch) | **PATCH** /galgame/{galgameId}/playlog | 添加游玩记录或游玩时长
*GalgameApi* | [**GalgameGet**](docs/GalgameApi.md#galgameget) | **GET** /galgame | 获取galgame列表
*GalgameApi* | [**GalgameIdGet**](docs/GalgameApi.md#galgameidget) | **GET** /galgame/{id} | 获取单个游戏的完整信息
*GalgameApi* | [**GalgamePatch**](docs/GalgameApi.md#galgamepatch) | **PATCH** /galgame | 新建或更新galgame
*OssApi* | [**OssGetGet**](docs/OssApi.md#ossgetget) | **GET** /oss/get | 获取oss预签名读取路径
*OssApi* | [**OssPutGet**](docs/OssApi.md#ossputget) | **GET** /oss/put | 获取oss预签名上传路径， 获取链接后会预先占用请求的空间， 直到客户端使用UpdateSpace通知服务器更新空间
*OssApi* | [**OssUpdatePut**](docs/OssApi.md#ossupdateput) | **PUT** /oss/update | 更新某个key下文件占用空间，一般用于上传完成后通知服务器计算具体空间
*ServerApi* | [**ServerInfoGet**](docs/ServerApi.md#serverinfoget) | **GET** /server/info | 获取服务器信息
*StaffApi* | [**StaffGet**](docs/StaffApi.md#staffget) | **GET** /staff | 获取staff列表
*StaffApi* | [**StaffPatch**](docs/StaffApi.md#staffpatch) | **PATCH** /staff | 新建或更新staff
*UserApi* | [**UserGet**](docs/UserApi.md#userget) | **GET** /user | 获取用户列表
*UserApi* | [**UserIdGet**](docs/UserApi.md#useridget) | **GET** /user/{id} | 获取指定id的用户
*UserApi* | [**UserMeGet**](docs/UserApi.md#usermeget) | **GET** /user/me | 获取自己的用户信息
*UserApi* | [**UserMePatch**](docs/UserApi.md#usermepatch) | **PATCH** /user/me | 修改用户信息
*UserApi* | [**UserPost**](docs/UserApi.md#userpost) | **POST** /user | 注册账户
*UserApi* | [**UserSessionBgmPost**](docs/UserApi.md#usersessionbgmpost) | **POST** /user/session/bgm | 使用bgm账户登录/注册
*UserApi* | [**UserSessionPost**](docs/UserApi.md#usersessionpost) | **POST** /user/session | 登录账户
*UserApi* | [**UserSessionRefreshGet**](docs/UserApi.md#usersessionrefreshget) | **GET** /user/session/refresh | 获取一个新jwt token
*WeatherForecastApi* | [**GetWeatherForecast**](docs/WeatherForecastApi.md#getweatherforecast) | **GET** /weather_forecast | 


<a id="documentation-for-models"></a>
## Documentation for Models

 - [Model.BangumiToken](docs/BangumiToken.md)
 - [Model.Career](docs/Career.md)
 - [Model.CharacterDto](docs/CharacterDto.md)
 - [Model.CharacterUpdateDto](docs/CharacterUpdateDto.md)
 - [Model.DateOnly](docs/DateOnly.md)
 - [Model.DayOfWeek](docs/DayOfWeek.md)
 - [Model.GalgameDeletedDto](docs/GalgameDeletedDto.md)
 - [Model.GalgameDeletedDtoPagedResult](docs/GalgameDeletedDtoPagedResult.md)
 - [Model.GalgameDto](docs/GalgameDto.md)
 - [Model.GalgameDtoPagedResult](docs/GalgameDtoPagedResult.md)
 - [Model.GalgameUpdateDto](docs/GalgameUpdateDto.md)
 - [Model.Gender](docs/Gender.md)
 - [Model.PlayLogDto](docs/PlayLogDto.md)
 - [Model.PlayType](docs/PlayType.md)
 - [Model.ServerInfoDto](docs/ServerInfoDto.md)
 - [Model.StaffDto](docs/StaffDto.md)
 - [Model.StaffDtoPagedResult](docs/StaffDtoPagedResult.md)
 - [Model.StaffGameDto](docs/StaffGameDto.md)
 - [Model.StaffGameUpdateDto](docs/StaffGameUpdateDto.md)
 - [Model.StaffUpdateDto](docs/StaffUpdateDto.md)
 - [Model.UserDto](docs/UserDto.md)
 - [Model.UserDtoPagedResult](docs/UserDtoPagedResult.md)
 - [Model.UserLoginDto](docs/UserLoginDto.md)
 - [Model.UserLoginViaBgmDto](docs/UserLoginViaBgmDto.md)
 - [Model.UserModifyDto](docs/UserModifyDto.md)
 - [Model.UserRegisterDto](docs/UserRegisterDto.md)
 - [Model.UserType](docs/UserType.md)
 - [Model.UserWithTokenDto](docs/UserWithTokenDto.md)
 - [Model.WeatherForecast](docs/WeatherForecast.md)


<a id="documentation-for-authorization"></a>
## Documentation for Authorization


Authentication schemes defined for the API:
<a id="oauth2"></a>
### oauth2

- **Type**: API key
- **API key parameter name**: Authorization
- **Location**: HTTP header

